{"id":"K6Kq","dependencies":[{"name":"/Users/guoyaqi/work/2020/playground/node_modules/monaco-editor/package.json","includedInParent":true,"mtime":1584771267802},{"name":"./cssScanner.js","loc":{"line":13,"column":35},"parent":"/Users/guoyaqi/work/2020/playground/node_modules/monaco-editor/esm/vs/language/css/_deps/vscode-css-languageservice/parser/cssParser.js","resolved":"/Users/guoyaqi/work/2020/playground/node_modules/monaco-editor/esm/vs/language/css/_deps/vscode-css-languageservice/parser/cssScanner.js"},{"name":"./cssNodes.js","loc":{"line":14,"column":23},"parent":"/Users/guoyaqi/work/2020/playground/node_modules/monaco-editor/esm/vs/language/css/_deps/vscode-css-languageservice/parser/cssParser.js","resolved":"/Users/guoyaqi/work/2020/playground/node_modules/monaco-editor/esm/vs/language/css/_deps/vscode-css-languageservice/parser/cssNodes.js"},{"name":"./cssErrors.js","loc":{"line":15,"column":27},"parent":"/Users/guoyaqi/work/2020/playground/node_modules/monaco-editor/esm/vs/language/css/_deps/vscode-css-languageservice/parser/cssParser.js","resolved":"/Users/guoyaqi/work/2020/playground/node_modules/monaco-editor/esm/vs/language/css/_deps/vscode-css-languageservice/parser/cssErrors.js"},{"name":"../languageFacts/facts.js","loc":{"line":16,"column":31},"parent":"/Users/guoyaqi/work/2020/playground/node_modules/monaco-editor/esm/vs/language/css/_deps/vscode-css-languageservice/parser/cssParser.js","resolved":"/Users/guoyaqi/work/2020/playground/node_modules/monaco-editor/esm/vs/language/css/_deps/vscode-css-languageservice/languageFacts/facts.js"},{"name":"../utils/objects.js","loc":{"line":17,"column":26},"parent":"/Users/guoyaqi/work/2020/playground/node_modules/monaco-editor/esm/vs/language/css/_deps/vscode-css-languageservice/parser/cssParser.js","resolved":"/Users/guoyaqi/work/2020/playground/node_modules/monaco-editor/esm/vs/language/css/_deps/vscode-css-languageservice/utils/objects.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.Parser=void 0;var e=require(\"./cssScanner.js\"),t=o(require(\"./cssNodes.js\")),r=require(\"./cssErrors.js\"),i=o(require(\"../languageFacts/facts.js\")),s=require(\"../utils/objects.js\");function n(){if(\"function\"!=typeof WeakMap)return null;var e=new WeakMap;return n=function(){return e},e}function o(e){if(e&&e.__esModule)return e;if(null===e||\"object\"!=typeof e&&\"function\"!=typeof e)return{default:e};var t=n();if(t&&t.has(e))return t.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){var o=i?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(r,s,o):r[s]=e[s]}return r.default=e,t&&t.set(e,r),r}var a=function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var i=Array(e),s=0;for(t=0;t<r;t++)for(var n=arguments[t],o=0,a=n.length;o<a;o++,s++)i[s]=n[o];return i},p=function(){function n(t){void 0===t&&(t=new e.Scanner),this.keyframeRegex=/^@(\\-(webkit|ms|moz|o)\\-)?keyframes$/i,this.scanner=t,this.token={type:e.TokenType.EOF,offset:-1,len:0,text:\"\"},this.prevToken=void 0}return n.prototype.peekIdent=function(t){return e.TokenType.Ident===this.token.type&&t.length===this.token.text.length&&t===this.token.text.toLowerCase()},n.prototype.peekKeyword=function(t){return e.TokenType.AtKeyword===this.token.type&&t.length===this.token.text.length&&t===this.token.text.toLowerCase()},n.prototype.peekDelim=function(t){return e.TokenType.Delim===this.token.type&&t===this.token.text},n.prototype.peek=function(e){return e===this.token.type},n.prototype.peekRegExp=function(e,t){return e===this.token.type&&t.test(this.token.text)},n.prototype.hasWhitespace=function(){return!!this.prevToken&&this.prevToken.offset+this.prevToken.len!==this.token.offset},n.prototype.consumeToken=function(){this.prevToken=this.token,this.token=this.scanner.scan()},n.prototype.mark=function(){return{prev:this.prevToken,curr:this.token,pos:this.scanner.pos()}},n.prototype.restoreAtMark=function(e){this.prevToken=e.prev,this.token=e.curr,this.scanner.goBackTo(e.pos)},n.prototype.try=function(e){var t=this.mark(),r=e();return r||(this.restoreAtMark(t),null)},n.prototype.acceptOneKeyword=function(t){if(e.TokenType.AtKeyword===this.token.type)for(var r=0,i=t;r<i.length;r++){var s=i[r];if(s.length===this.token.text.length&&s===this.token.text.toLowerCase())return this.consumeToken(),!0}return!1},n.prototype.accept=function(e){return e===this.token.type&&(this.consumeToken(),!0)},n.prototype.acceptIdent=function(e){return!!this.peekIdent(e)&&(this.consumeToken(),!0)},n.prototype.acceptKeyword=function(e){return!!this.peekKeyword(e)&&(this.consumeToken(),!0)},n.prototype.acceptDelim=function(e){return!!this.peekDelim(e)&&(this.consumeToken(),!0)},n.prototype.acceptRegexp=function(e){return!!e.test(this.token.text)&&(this.consumeToken(),!0)},n.prototype._parseRegexp=function(e){var r=this.createNode(t.NodeType.Identifier);do{}while(this.acceptRegexp(e));return this.finish(r)},n.prototype.acceptUnquotedString=function(){var e=this.scanner.pos();this.scanner.goBackTo(this.token.offset);var t=this.scanner.scanUnquotedString();return t?(this.token=t,this.consumeToken(),!0):(this.scanner.goBackTo(e),!1)},n.prototype.resync=function(t,r){for(;;){if(t&&-1!==t.indexOf(this.token.type))return this.consumeToken(),!0;if(r&&-1!==r.indexOf(this.token.type))return!0;if(this.token.type===e.TokenType.EOF)return!1;this.token=this.scanner.scan()}},n.prototype.createNode=function(e){return new t.Node(this.token.offset,this.token.len,e)},n.prototype.create=function(e){return new e(this.token.offset,this.token.len)},n.prototype.finish=function(e,r,i,s){if(!(e instanceof t.Nodelist)&&(r&&this.markError(e,r,i,s),this.prevToken)){var n=this.prevToken.offset+this.prevToken.len;e.length=n>e.offset?n-e.offset:0}return e},n.prototype.markError=function(e,r,i,s){this.token!==this.lastErrorToken&&(e.addIssue(new t.Marker(e,r,t.Level.Error,void 0,this.token.offset,this.token.len)),this.lastErrorToken=this.token),(i||s)&&this.resync(i,s)},n.prototype.parseStylesheet=function(e){var t=e.version,r=e.getText();return this.internalParse(r,this._parseStylesheet,function(i,s){if(e.version!==t)throw new Error(\"Underlying model has changed, AST is no longer valid\");return r.substr(i,s)})},n.prototype.internalParse=function(e,t,r){this.scanner.setSource(e),this.token=this.scanner.scan();var i=t.bind(this)();return i&&(i.textProvider=r||function(t,r){return e.substr(t,r)}),i},n.prototype._parseStylesheet=function(){for(var i=this.create(t.Stylesheet);i.addChild(this._parseStylesheetStart()););var s=!1;do{var n=!1;do{n=!1;var o=this._parseStylesheetStatement();for(o&&(i.addChild(o),n=!0,s=!1,this.peek(e.TokenType.EOF)||!this._needsSemicolonAfter(o)||this.accept(e.TokenType.SemiColon)||this.markError(i,r.ParseError.SemiColonExpected));this.accept(e.TokenType.SemiColon)||this.accept(e.TokenType.CDO)||this.accept(e.TokenType.CDC);)n=!0,s=!1}while(n);if(this.peek(e.TokenType.EOF))break;s||(this.peek(e.TokenType.AtKeyword)?this.markError(i,r.ParseError.UnknownAtRule):this.markError(i,r.ParseError.RuleOrSelectorExpected),s=!0),this.consumeToken()}while(!this.peek(e.TokenType.EOF));return this.finish(i)},n.prototype._parseStylesheetStart=function(){return this._parseCharset()},n.prototype._parseStylesheetStatement=function(t){return void 0===t&&(t=!1),this.peek(e.TokenType.AtKeyword)?this._parseStylesheetAtStatement(t):this._parseRuleset(t)},n.prototype._parseStylesheetAtStatement=function(e){return void 0===e&&(e=!1),this._parseImport()||this._parseMedia(e)||this._parsePage()||this._parseFontFace()||this._parseKeyframe()||this._parseSupports(e)||this._parseViewPort()||this._parseNamespace()||this._parseDocument()||this._parseUnknownAtRule()},n.prototype._tryParseRuleset=function(t){var r=this.mark();if(this._parseSelector(t)){for(;this.accept(e.TokenType.Comma)&&this._parseSelector(t););if(this.accept(e.TokenType.CurlyL))return this.restoreAtMark(r),this._parseRuleset(t)}return this.restoreAtMark(r),null},n.prototype._parseRuleset=function(i){void 0===i&&(i=!1);var s=this.create(t.RuleSet),n=s.getSelectors();if(!n.addChild(this._parseSelector(i)))return null;for(;this.accept(e.TokenType.Comma);)if(!n.addChild(this._parseSelector(i)))return this.finish(s,r.ParseError.SelectorExpected);return this._parseBody(s,this._parseRuleSetDeclaration.bind(this))},n.prototype._parseRuleSetDeclaration=function(){return this._parseAtApply()||this._tryParseCustomPropertyDeclaration()||this._parseDeclaration()||this._parseUnknownAtRule()},n.prototype._parseAtApply=function(){if(!this.peekKeyword(\"@apply\"))return null;var e=this.create(t.AtApplyRule);return this.consumeToken(),e.setIdentifier(this._parseIdent([t.ReferenceType.Variable]))?this.finish(e):this.finish(e,r.ParseError.IdentifierExpected)},n.prototype._needsSemicolonAfter=function(e){switch(e.type){case t.NodeType.Keyframe:case t.NodeType.ViewPort:case t.NodeType.Media:case t.NodeType.Ruleset:case t.NodeType.Namespace:case t.NodeType.If:case t.NodeType.For:case t.NodeType.Each:case t.NodeType.While:case t.NodeType.MixinDeclaration:case t.NodeType.FunctionDeclaration:return!1;case t.NodeType.ExtendsReference:case t.NodeType.MixinContent:case t.NodeType.ReturnStatement:case t.NodeType.MediaQuery:case t.NodeType.Debug:case t.NodeType.Import:case t.NodeType.AtApplyRule:case t.NodeType.CustomPropertyDeclaration:return!0;case t.NodeType.VariableDeclaration:return e.needsSemicolon;case t.NodeType.MixinReference:return!e.getContent();case t.NodeType.Declaration:return!e.getNestedProperties()}return!1},n.prototype._parseDeclarations=function(i){var s=this.create(t.Declarations);if(!this.accept(e.TokenType.CurlyL))return null;for(var n=i();s.addChild(n)&&!this.peek(e.TokenType.CurlyR);){if(this._needsSemicolonAfter(n)&&!this.accept(e.TokenType.SemiColon))return this.finish(s,r.ParseError.SemiColonExpected,[e.TokenType.SemiColon,e.TokenType.CurlyR]);for(n&&this.prevToken&&this.prevToken.type===e.TokenType.SemiColon&&(n.semicolonPosition=this.prevToken.offset);this.accept(e.TokenType.SemiColon););n=i()}return this.accept(e.TokenType.CurlyR)?this.finish(s):this.finish(s,r.ParseError.RightCurlyExpected,[e.TokenType.CurlyR,e.TokenType.SemiColon])},n.prototype._parseBody=function(t,i){return t.setDeclarations(this._parseDeclarations(i))?this.finish(t):this.finish(t,r.ParseError.LeftCurlyExpected,[e.TokenType.CurlyR,e.TokenType.SemiColon])},n.prototype._parseSelector=function(e){var r=this.create(t.Selector),i=!1;for(e&&(i=r.addChild(this._parseCombinator()));r.addChild(this._parseSimpleSelector());)i=!0,r.addChild(this._parseCombinator());return i?this.finish(r):null},n.prototype._parseDeclaration=function(i){var s=this.create(t.Declaration);if(!s.setProperty(this._parseProperty()))return null;if(!this.accept(e.TokenType.Colon)){var n=i?a(i,[e.TokenType.SemiColon]):[e.TokenType.SemiColon];return this.finish(s,r.ParseError.ColonExpected,[e.TokenType.Colon],n)}return this.prevToken&&(s.colonPosition=this.prevToken.offset),s.setValue(this._parseExpr())?(s.addChild(this._parsePrio()),this.peek(e.TokenType.SemiColon)&&(s.semicolonPosition=this.token.offset),this.finish(s)):this.finish(s,r.ParseError.PropertyValueExpected)},n.prototype._tryParseCustomPropertyDeclaration=function(){if(!this.peekRegExp(e.TokenType.Ident,/^--/))return null;var i=this.create(t.CustomPropertyDeclaration);if(!i.setProperty(this._parseProperty()))return null;if(!this.accept(e.TokenType.Colon))return this.finish(i,r.ParseError.ColonExpected,[e.TokenType.Colon]);this.prevToken&&(i.colonPosition=this.prevToken.offset);var n=this.mark();if(this.peek(e.TokenType.CurlyL)){var o=this.create(t.CustomPropertySet),a=this._parseDeclarations(this._parseRuleSetDeclaration.bind(this));if(o.setDeclarations(a)&&!a.isErroneous(!0)&&(o.addChild(this._parsePrio()),this.peek(e.TokenType.SemiColon)))return this.finish(o),i.setPropertySet(o),i.semicolonPosition=this.token.offset,this.finish(i);this.restoreAtMark(n)}var p=this._parseExpr();return p&&!p.isErroneous(!0)&&(this._parsePrio(),this.peek(e.TokenType.SemiColon))?(i.setValue(p),i.semicolonPosition=this.token.offset,this.finish(i)):(this.restoreAtMark(n),i.addChild(this._parseCustomPropertyValue()),i.addChild(this._parsePrio()),(0,s.isDefined)(i.colonPosition)&&this.token.offset===i.colonPosition+1?this.finish(i,r.ParseError.PropertyValueExpected):this.finish(i))},n.prototype._parseCustomPropertyValue=function(){var i=this.create(t.Node),s=function(){return 0===n&&0===o&&0===a},n=0,o=0,a=0;e:for(;;){switch(this.token.type){case e.TokenType.SemiColon:case e.TokenType.Exclamation:if(s())break e;break;case e.TokenType.CurlyL:n++;break;case e.TokenType.CurlyR:if(--n<0){if(0===o&&0===a)break e;return this.finish(i,r.ParseError.LeftCurlyExpected)}break;case e.TokenType.ParenthesisL:o++;break;case e.TokenType.ParenthesisR:if(--o<0)return this.finish(i,r.ParseError.LeftParenthesisExpected);break;case e.TokenType.BracketL:a++;break;case e.TokenType.BracketR:if(--a<0)return this.finish(i,r.ParseError.LeftSquareBracketExpected);break;case e.TokenType.BadString:break e;case e.TokenType.EOF:var p=r.ParseError.RightCurlyExpected;return a>0?p=r.ParseError.RightSquareBracketExpected:o>0&&(p=r.ParseError.RightParenthesisExpected),this.finish(i,p)}this.consumeToken()}return this.finish(i)},n.prototype._tryToParseDeclaration=function(){var t=this.mark();return this._parseProperty()&&this.accept(e.TokenType.Colon)?(this.restoreAtMark(t),this._parseDeclaration()):(this.restoreAtMark(t),null)},n.prototype._parseProperty=function(){var e=this.create(t.Property),r=this.mark();return(this.acceptDelim(\"*\")||this.acceptDelim(\"_\"))&&this.hasWhitespace()?(this.restoreAtMark(r),null):e.setIdentifier(this._parsePropertyIdentifier())?this.finish(e):null},n.prototype._parsePropertyIdentifier=function(){return this._parseIdent()},n.prototype._parseCharset=function(){if(!this.peek(e.TokenType.Charset))return null;var i=this.create(t.Node);return this.consumeToken(),this.accept(e.TokenType.String)?this.accept(e.TokenType.SemiColon)?this.finish(i):this.finish(i,r.ParseError.SemiColonExpected):this.finish(i,r.ParseError.IdentifierExpected)},n.prototype._parseImport=function(){if(!this.peekKeyword(\"@import\"))return null;var i=this.create(t.Import);return this.consumeToken(),i.addChild(this._parseURILiteral())||i.addChild(this._parseStringLiteral())?(this.peek(e.TokenType.SemiColon)||this.peek(e.TokenType.EOF)||i.setMedialist(this._parseMediaQueryList()),this.finish(i)):this.finish(i,r.ParseError.URIOrStringExpected)},n.prototype._parseNamespace=function(){if(!this.peekKeyword(\"@namespace\"))return null;var i=this.create(t.Namespace);return this.consumeToken(),i.addChild(this._parseURILiteral())||(i.addChild(this._parseIdent()),i.addChild(this._parseURILiteral())||i.addChild(this._parseStringLiteral()))?this.accept(e.TokenType.SemiColon)?this.finish(i):this.finish(i,r.ParseError.SemiColonExpected):this.finish(i,r.ParseError.URIExpected,[e.TokenType.SemiColon])},n.prototype._parseFontFace=function(){if(!this.peekKeyword(\"@font-face\"))return null;var e=this.create(t.FontFace);return this.consumeToken(),this._parseBody(e,this._parseRuleSetDeclaration.bind(this))},n.prototype._parseViewPort=function(){if(!this.peekKeyword(\"@-ms-viewport\")&&!this.peekKeyword(\"@-o-viewport\")&&!this.peekKeyword(\"@viewport\"))return null;var e=this.create(t.ViewPort);return this.consumeToken(),this._parseBody(e,this._parseRuleSetDeclaration.bind(this))},n.prototype._parseKeyframe=function(){if(!this.peekRegExp(e.TokenType.AtKeyword,this.keyframeRegex))return null;var i=this.create(t.Keyframe),s=this.create(t.Node);return this.consumeToken(),i.setKeyword(this.finish(s)),s.matches(\"@-ms-keyframes\")&&this.markError(s,r.ParseError.UnknownKeyword),i.setIdentifier(this._parseKeyframeIdent())?this._parseBody(i,this._parseKeyframeSelector.bind(this)):this.finish(i,r.ParseError.IdentifierExpected,[e.TokenType.CurlyR])},n.prototype._parseKeyframeIdent=function(){return this._parseIdent([t.ReferenceType.Keyframe])},n.prototype._parseKeyframeSelector=function(){var i=this.create(t.KeyframeSelector);if(!i.addChild(this._parseIdent())&&!this.accept(e.TokenType.Percentage))return null;for(;this.accept(e.TokenType.Comma);)if(!i.addChild(this._parseIdent())&&!this.accept(e.TokenType.Percentage))return this.finish(i,r.ParseError.PercentageExpected);return this._parseBody(i,this._parseRuleSetDeclaration.bind(this))},n.prototype._tryParseKeyframeSelector=function(){var r=this.create(t.KeyframeSelector),i=this.mark();if(!r.addChild(this._parseIdent())&&!this.accept(e.TokenType.Percentage))return null;for(;this.accept(e.TokenType.Comma);)if(!r.addChild(this._parseIdent())&&!this.accept(e.TokenType.Percentage))return this.restoreAtMark(i),null;return this.peek(e.TokenType.CurlyL)?this._parseBody(r,this._parseRuleSetDeclaration.bind(this)):(this.restoreAtMark(i),null)},n.prototype._parseSupports=function(e){if(void 0===e&&(e=!1),!this.peekKeyword(\"@supports\"))return null;var r=this.create(t.Supports);return this.consumeToken(),r.addChild(this._parseSupportsCondition()),this._parseBody(r,this._parseSupportsDeclaration.bind(this,e))},n.prototype._parseSupportsDeclaration=function(e){return void 0===e&&(e=!1),e?this._tryParseRuleset(!0)||this._tryToParseDeclaration()||this._parseStylesheetStatement(!0):this._parseStylesheetStatement(!1)},n.prototype._parseSupportsCondition=function(){var r=this.create(t.SupportsCondition);if(this.acceptIdent(\"not\"))r.addChild(this._parseSupportsConditionInParens());else if(r.addChild(this._parseSupportsConditionInParens()),this.peekRegExp(e.TokenType.Ident,/^(and|or)$/i))for(var i=this.token.text.toLowerCase();this.acceptIdent(i);)r.addChild(this._parseSupportsConditionInParens());return this.finish(r)},n.prototype._parseSupportsConditionInParens=function(){var i=this.create(t.SupportsCondition);if(this.accept(e.TokenType.ParenthesisL))return this.prevToken&&(i.lParent=this.prevToken.offset),i.addChild(this._tryToParseDeclaration())||this._parseSupportsCondition()?this.accept(e.TokenType.ParenthesisR)?(this.prevToken&&(i.rParent=this.prevToken.offset),this.finish(i)):this.finish(i,r.ParseError.RightParenthesisExpected,[e.TokenType.ParenthesisR],[]):this.finish(i,r.ParseError.ConditionExpected);if(this.peek(e.TokenType.Ident)){var s=this.mark();if(this.consumeToken(),!this.hasWhitespace()&&this.accept(e.TokenType.ParenthesisL)){for(var n=1;this.token.type!==e.TokenType.EOF&&0!==n;)this.token.type===e.TokenType.ParenthesisL?n++:this.token.type===e.TokenType.ParenthesisR&&n--,this.consumeToken();return this.finish(i)}this.restoreAtMark(s)}return this.finish(i,r.ParseError.LeftParenthesisExpected,[],[e.TokenType.ParenthesisL])},n.prototype._parseMediaDeclaration=function(e){return void 0===e&&(e=!1),e?this._tryParseRuleset(!0)||this._tryToParseDeclaration()||this._parseStylesheetStatement(!0):this._parseStylesheetStatement(!1)},n.prototype._parseMedia=function(e){if(void 0===e&&(e=!1),!this.peekKeyword(\"@media\"))return null;var i=this.create(t.Media);return this.consumeToken(),i.addChild(this._parseMediaQueryList())?this._parseBody(i,this._parseMediaDeclaration.bind(this,e)):this.finish(i,r.ParseError.MediaQueryExpected)},n.prototype._parseMediaQueryList=function(){var i=this.create(t.Medialist);if(!i.addChild(this._parseMediaQuery([e.TokenType.CurlyL])))return this.finish(i,r.ParseError.MediaQueryExpected);for(;this.accept(e.TokenType.Comma);)if(!i.addChild(this._parseMediaQuery([e.TokenType.CurlyL])))return this.finish(i,r.ParseError.MediaQueryExpected);return this.finish(i)},n.prototype._parseMediaQuery=function(i){var s=this.create(t.MediaQuery),n=!0,o=!1;if(!this.peek(e.TokenType.ParenthesisL)){if(this.acceptIdent(\"only\")||this.acceptIdent(\"not\"),!s.addChild(this._parseIdent()))return null;o=!0,n=this.acceptIdent(\"and\")}for(;n;)if(s.addChild(this._parseMediaContentStart()))n=this.acceptIdent(\"and\");else{if(!this.accept(e.TokenType.ParenthesisL))return o?this.finish(s,r.ParseError.LeftParenthesisExpected,[],i):null;if(!s.addChild(this._parseMediaFeatureName()))return this.finish(s,r.ParseError.IdentifierExpected,[],i);if(this.accept(e.TokenType.Colon)&&!s.addChild(this._parseExpr()))return this.finish(s,r.ParseError.TermExpected,[],i);if(!this.accept(e.TokenType.ParenthesisR))return this.finish(s,r.ParseError.RightParenthesisExpected,[],i);n=this.acceptIdent(\"and\")}return this.finish(s)},n.prototype._parseMediaContentStart=function(){return null},n.prototype._parseMediaFeatureName=function(){return this._parseIdent()},n.prototype._parseMedium=function(){var e=this.create(t.Node);return e.addChild(this._parseIdent())?this.finish(e):null},n.prototype._parsePageDeclaration=function(){return this._parsePageMarginBox()||this._parseRuleSetDeclaration()},n.prototype._parsePage=function(){if(!this.peekKeyword(\"@page\"))return null;var i=this.create(t.Page);if(this.consumeToken(),i.addChild(this._parsePageSelector()))for(;this.accept(e.TokenType.Comma);)if(!i.addChild(this._parsePageSelector()))return this.finish(i,r.ParseError.IdentifierExpected);return this._parseBody(i,this._parsePageDeclaration.bind(this))},n.prototype._parsePageMarginBox=function(){if(!this.peek(e.TokenType.AtKeyword))return null;var s=this.create(t.PageBoxMarginBox);return this.acceptOneKeyword(i.pageBoxDirectives)||this.markError(s,r.ParseError.UnknownAtRule,[],[e.TokenType.CurlyL]),this._parseBody(s,this._parseRuleSetDeclaration.bind(this))},n.prototype._parsePageSelector=function(){if(!this.peek(e.TokenType.Ident)&&!this.peek(e.TokenType.Colon))return null;var i=this.create(t.Node);return i.addChild(this._parseIdent()),this.accept(e.TokenType.Colon)&&!i.addChild(this._parseIdent())?this.finish(i,r.ParseError.IdentifierExpected):this.finish(i)},n.prototype._parseDocument=function(){if(!this.peekKeyword(\"@-moz-document\"))return null;var r=this.create(t.Document);return this.consumeToken(),this.resync([],[e.TokenType.CurlyL]),this._parseBody(r,this._parseStylesheetStatement.bind(this))},n.prototype._parseUnknownAtRule=function(){if(!this.peek(e.TokenType.AtKeyword))return null;var i=this.create(t.UnknownAtRule);i.addChild(this._parseUnknownAtRuleName());var s=0,n=0,o=0,a=0;e:for(;;){switch(this.token.type){case e.TokenType.SemiColon:if(0===n&&0===o&&0===a)break e;break;case e.TokenType.EOF:return n>0?this.finish(i,r.ParseError.RightCurlyExpected):a>0?this.finish(i,r.ParseError.RightSquareBracketExpected):o>0?this.finish(i,r.ParseError.RightParenthesisExpected):this.finish(i);case e.TokenType.CurlyL:s++,n++;break;case e.TokenType.CurlyR:if(n--,s>0&&0===n){if(this.consumeToken(),a>0)return this.finish(i,r.ParseError.RightSquareBracketExpected);if(o>0)return this.finish(i,r.ParseError.RightParenthesisExpected);break e}if(n<0){if(0===o&&0===a)break e;return this.finish(i,r.ParseError.LeftCurlyExpected)}break;case e.TokenType.ParenthesisL:o++;break;case e.TokenType.ParenthesisR:if(--o<0)return this.finish(i,r.ParseError.LeftParenthesisExpected);break;case e.TokenType.BracketL:a++;break;case e.TokenType.BracketR:if(--a<0)return this.finish(i,r.ParseError.LeftSquareBracketExpected)}this.consumeToken()}return i},n.prototype._parseUnknownAtRuleName=function(){var r=this.create(t.Node);return this.accept(e.TokenType.AtKeyword)?this.finish(r):r},n.prototype._parseOperator=function(){if(this.peekDelim(\"/\")||this.peekDelim(\"*\")||this.peekDelim(\"+\")||this.peekDelim(\"-\")||this.peek(e.TokenType.Dashmatch)||this.peek(e.TokenType.Includes)||this.peek(e.TokenType.SubstringOperator)||this.peek(e.TokenType.PrefixOperator)||this.peek(e.TokenType.SuffixOperator)||this.peekDelim(\"=\")){var r=this.createNode(t.NodeType.Operator);return this.consumeToken(),this.finish(r)}return null},n.prototype._parseUnaryOperator=function(){if(!this.peekDelim(\"+\")&&!this.peekDelim(\"-\"))return null;var e=this.create(t.Node);return this.consumeToken(),this.finish(e)},n.prototype._parseCombinator=function(){if(this.peekDelim(\">\")){var e=this.create(t.Node);this.consumeToken();var r=this.mark();if(!this.hasWhitespace()&&this.acceptDelim(\">\")){if(!this.hasWhitespace()&&this.acceptDelim(\">\"))return e.type=t.NodeType.SelectorCombinatorShadowPiercingDescendant,this.finish(e);this.restoreAtMark(r)}return e.type=t.NodeType.SelectorCombinatorParent,this.finish(e)}if(this.peekDelim(\"+\")){e=this.create(t.Node);return this.consumeToken(),e.type=t.NodeType.SelectorCombinatorSibling,this.finish(e)}if(this.peekDelim(\"~\")){e=this.create(t.Node);return this.consumeToken(),e.type=t.NodeType.SelectorCombinatorAllSiblings,this.finish(e)}if(this.peekDelim(\"/\")){e=this.create(t.Node);this.consumeToken();r=this.mark();if(!this.hasWhitespace()&&this.acceptIdent(\"deep\")&&!this.hasWhitespace()&&this.acceptDelim(\"/\"))return e.type=t.NodeType.SelectorCombinatorShadowPiercingDescendant,this.finish(e);this.restoreAtMark(r)}return null},n.prototype._parseSimpleSelector=function(){var e=this.create(t.SimpleSelector),r=0;for(e.addChild(this._parseElementName())&&r++;(0===r||!this.hasWhitespace())&&e.addChild(this._parseSimpleSelectorBody());)r++;return r>0?this.finish(e):null},n.prototype._parseSimpleSelectorBody=function(){return this._parsePseudo()||this._parseHash()||this._parseClass()||this._parseAttrib()},n.prototype._parseSelectorIdent=function(){return this._parseIdent()},n.prototype._parseHash=function(){if(!this.peek(e.TokenType.Hash)&&!this.peekDelim(\"#\"))return null;var i=this.createNode(t.NodeType.IdentifierSelector);if(this.acceptDelim(\"#\")){if(this.hasWhitespace()||!i.addChild(this._parseSelectorIdent()))return this.finish(i,r.ParseError.IdentifierExpected)}else this.consumeToken();return this.finish(i)},n.prototype._parseClass=function(){if(!this.peekDelim(\".\"))return null;var e=this.createNode(t.NodeType.ClassSelector);return this.consumeToken(),this.hasWhitespace()||!e.addChild(this._parseSelectorIdent())?this.finish(e,r.ParseError.IdentifierExpected):this.finish(e)},n.prototype._parseElementName=function(){var e=this.mark(),r=this.createNode(t.NodeType.ElementNameSelector);return r.addChild(this._parseNamespacePrefix()),r.addChild(this._parseSelectorIdent())||this.acceptDelim(\"*\")?this.finish(r):(this.restoreAtMark(e),null)},n.prototype._parseNamespacePrefix=function(){var e=this.mark(),r=this.createNode(t.NodeType.NamespacePrefix);return!r.addChild(this._parseIdent())&&this.acceptDelim(\"*\"),this.acceptDelim(\"|\")?this.finish(r):(this.restoreAtMark(e),null)},n.prototype._parseAttrib=function(){if(!this.peek(e.TokenType.BracketL))return null;var i=this.create(t.AttributeSelector);return this.consumeToken(),i.setNamespacePrefix(this._parseNamespacePrefix()),i.setIdentifier(this._parseIdent())?(i.setOperator(this._parseOperator())&&(i.setValue(this._parseBinaryExpr()),this.acceptIdent(\"i\")),this.accept(e.TokenType.BracketR)?this.finish(i):this.finish(i,r.ParseError.RightSquareBracketExpected)):this.finish(i,r.ParseError.IdentifierExpected)},n.prototype._parsePseudo=function(){var i=this,s=this._tryParsePseudoIdentifier();if(s){if(!this.hasWhitespace()&&this.accept(e.TokenType.ParenthesisL)){if(s.addChild(this.try(function(){var r=i.create(t.Node);if(!r.addChild(i._parseSelector(!1)))return null;for(;i.accept(e.TokenType.Comma)&&r.addChild(i._parseSelector(!1)););return i.peek(e.TokenType.ParenthesisR)?i.finish(r):null})||this._parseBinaryExpr()),!this.accept(e.TokenType.ParenthesisR))return this.finish(s,r.ParseError.RightParenthesisExpected)}return this.finish(s)}return null},n.prototype._tryParsePseudoIdentifier=function(){if(!this.peek(e.TokenType.Colon))return null;var i=this.mark(),s=this.createNode(t.NodeType.PseudoSelector);return this.consumeToken(),this.hasWhitespace()?(this.restoreAtMark(i),null):(this.accept(e.TokenType.Colon)&&this.hasWhitespace()&&this.markError(s,r.ParseError.IdentifierExpected),s.addChild(this._parseIdent())||this.markError(s,r.ParseError.IdentifierExpected),s)},n.prototype._tryParsePrio=function(){var e=this.mark(),t=this._parsePrio();return t||(this.restoreAtMark(e),null)},n.prototype._parsePrio=function(){if(!this.peek(e.TokenType.Exclamation))return null;var r=this.createNode(t.NodeType.Prio);return this.accept(e.TokenType.Exclamation)&&this.acceptIdent(\"important\")?this.finish(r):null},n.prototype._parseExpr=function(r){void 0===r&&(r=!1);var i=this.create(t.Expression);if(!i.addChild(this._parseBinaryExpr()))return null;for(;;){if(this.peek(e.TokenType.Comma)){if(r)return this.finish(i);this.consumeToken()}if(!i.addChild(this._parseBinaryExpr()))break}return this.finish(i)},n.prototype._parseNamedLine=function(){if(!this.peek(e.TokenType.BracketL))return null;var i=this.createNode(t.NodeType.GridLine);for(this.consumeToken();i.addChild(this._parseIdent()););return this.accept(e.TokenType.BracketR)?this.finish(i):this.finish(i,r.ParseError.RightSquareBracketExpected)},n.prototype._parseBinaryExpr=function(e,i){var s=this.create(t.BinaryExpression);if(!s.setLeft(e||this._parseTerm()))return null;if(!s.setOperator(i||this._parseOperator()))return this.finish(s);if(!s.setRight(this._parseTerm()))return this.finish(s,r.ParseError.TermExpected);s=this.finish(s);var n=this._parseOperator();return n&&(s=this._parseBinaryExpr(s,n)),this.finish(s)},n.prototype._parseTerm=function(){var e=this.create(t.Term);return e.setOperator(this._parseUnaryOperator()),e.setExpression(this._parseURILiteral())||e.setExpression(this._parseFunction())||e.setExpression(this._parseIdent())||e.setExpression(this._parseStringLiteral())||e.setExpression(this._parseNumeric())||e.setExpression(this._parseHexColor())||e.setExpression(this._parseOperation())||e.setExpression(this._parseNamedLine())?this.finish(e):null},n.prototype._parseOperation=function(){if(!this.peek(e.TokenType.ParenthesisL))return null;var i=this.create(t.Node);return this.consumeToken(),i.addChild(this._parseExpr()),this.accept(e.TokenType.ParenthesisR)?this.finish(i):this.finish(i,r.ParseError.RightParenthesisExpected)},n.prototype._parseNumeric=function(){if(this.peek(e.TokenType.Num)||this.peek(e.TokenType.Percentage)||this.peek(e.TokenType.Resolution)||this.peek(e.TokenType.Length)||this.peek(e.TokenType.EMS)||this.peek(e.TokenType.EXS)||this.peek(e.TokenType.Angle)||this.peek(e.TokenType.Time)||this.peek(e.TokenType.Dimension)||this.peek(e.TokenType.Freq)){var r=this.create(t.NumericValue);return this.consumeToken(),this.finish(r)}return null},n.prototype._parseStringLiteral=function(){if(!this.peek(e.TokenType.String)&&!this.peek(e.TokenType.BadString))return null;var r=this.createNode(t.NodeType.StringLiteral);return this.consumeToken(),this.finish(r)},n.prototype._parseURILiteral=function(){if(!this.peekRegExp(e.TokenType.Ident,/^url(-prefix)?$/i))return null;var i=this.mark(),s=this.createNode(t.NodeType.URILiteral);return this.accept(e.TokenType.Ident),this.hasWhitespace()||!this.peek(e.TokenType.ParenthesisL)?(this.restoreAtMark(i),null):(this.scanner.inURL=!0,this.consumeToken(),s.addChild(this._parseURLArgument()),this.scanner.inURL=!1,this.accept(e.TokenType.ParenthesisR)?this.finish(s):this.finish(s,r.ParseError.RightParenthesisExpected))},n.prototype._parseURLArgument=function(){var r=this.create(t.Node);return this.accept(e.TokenType.String)||this.accept(e.TokenType.BadString)||this.acceptUnquotedString()?this.finish(r):null},n.prototype._parseIdent=function(r){if(!this.peek(e.TokenType.Ident))return null;var i=this.create(t.Identifier);return r&&(i.referenceTypes=r),i.isCustomProperty=this.peekRegExp(e.TokenType.Ident,/^--/),this.consumeToken(),this.finish(i)},n.prototype._parseFunction=function(){var i=this.mark(),s=this.create(t.Function);if(!s.setIdentifier(this._parseFunctionIdentifier()))return null;if(this.hasWhitespace()||!this.accept(e.TokenType.ParenthesisL))return this.restoreAtMark(i),null;if(s.getArguments().addChild(this._parseFunctionArgument()))for(;this.accept(e.TokenType.Comma)&&!this.peek(e.TokenType.ParenthesisR);)s.getArguments().addChild(this._parseFunctionArgument())||this.markError(s,r.ParseError.ExpressionExpected);return this.accept(e.TokenType.ParenthesisR)?this.finish(s):this.finish(s,r.ParseError.RightParenthesisExpected)},n.prototype._parseFunctionIdentifier=function(){if(!this.peek(e.TokenType.Ident))return null;var r=this.create(t.Identifier);if(r.referenceTypes=[t.ReferenceType.Function],this.acceptIdent(\"progid\")){if(this.accept(e.TokenType.Colon))for(;this.accept(e.TokenType.Ident)&&this.acceptDelim(\".\"););return this.finish(r)}return this.consumeToken(),this.finish(r)},n.prototype._parseFunctionArgument=function(){var e=this.create(t.FunctionArgument);return e.setValue(this._parseExpr(!0))?this.finish(e):null},n.prototype._parseHexColor=function(){if(this.peekRegExp(e.TokenType.Hash,/^#([A-Fa-f0-9]{3}|[A-Fa-f0-9]{4}|[A-Fa-f0-9]{6}|[A-Fa-f0-9]{8})$/g)){var r=this.create(t.HexColorValue);return this.consumeToken(),this.finish(r)}return null},n}();exports.Parser=p;"},"sourceMaps":null,"error":null,"hash":"30637948b8a461c9460a82ce63be68f2","cacheData":{"env":{}}}