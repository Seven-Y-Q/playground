{"id":"OWxC","dependencies":[{"name":"/Users/guoyaqi/work/2020/playground/node_modules/monaco-editor/package.json","includedInParent":true,"mtime":1584771267802},{"name":"../languageFacts/facts.js","loc":{"line":6,"column":31},"parent":"/Users/guoyaqi/work/2020/playground/node_modules/monaco-editor/esm/vs/language/css/_deps/vscode-css-languageservice/services/lint.js","resolved":"/Users/guoyaqi/work/2020/playground/node_modules/monaco-editor/esm/vs/language/css/_deps/vscode-css-languageservice/languageFacts/facts.js"},{"name":"./lintRules.js","loc":{"line":7,"column":32},"parent":"/Users/guoyaqi/work/2020/playground/node_modules/monaco-editor/esm/vs/language/css/_deps/vscode-css-languageservice/services/lint.js","resolved":"/Users/guoyaqi/work/2020/playground/node_modules/monaco-editor/esm/vs/language/css/_deps/vscode-css-languageservice/services/lintRules.js"},{"name":"../parser/cssNodes.js","loc":{"line":8,"column":23},"parent":"/Users/guoyaqi/work/2020/playground/node_modules/monaco-editor/esm/vs/language/css/_deps/vscode-css-languageservice/services/lint.js","resolved":"/Users/guoyaqi/work/2020/playground/node_modules/monaco-editor/esm/vs/language/css/_deps/vscode-css-languageservice/parser/cssNodes.js"},{"name":"./lintUtil.js","loc":{"line":9,"column":43},"parent":"/Users/guoyaqi/work/2020/playground/node_modules/monaco-editor/esm/vs/language/css/_deps/vscode-css-languageservice/services/lint.js","resolved":"/Users/guoyaqi/work/2020/playground/node_modules/monaco-editor/esm/vs/language/css/_deps/vscode-css-languageservice/services/lintUtil.js"},{"name":"../utils/arrays.js","loc":{"line":10,"column":22},"parent":"/Users/guoyaqi/work/2020/playground/node_modules/monaco-editor/esm/vs/language/css/_deps/vscode-css-languageservice/services/lint.js","resolved":"/Users/guoyaqi/work/2020/playground/node_modules/monaco-editor/esm/vs/language/css/_deps/vscode-css-languageservice/utils/arrays.js"},{"name":"./../../../fillers/vscode-nls.js","loc":{"line":11,"column":21},"parent":"/Users/guoyaqi/work/2020/playground/node_modules/monaco-editor/esm/vs/language/css/_deps/vscode-css-languageservice/services/lint.js","resolved":"/Users/guoyaqi/work/2020/playground/node_modules/monaco-editor/esm/vs/language/css/fillers/vscode-nls.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.LintVisitor=void 0;var e=s(require(\"../languageFacts/facts.js\")),t=require(\"./lintRules.js\"),r=s(require(\"../parser/cssNodes.js\")),i=s(require(\"./lintUtil.js\")),n=require(\"../utils/arrays.js\"),a=s(require(\"./../../../fillers/vscode-nls.js\"));function o(){if(\"function\"!=typeof WeakMap)return null;var e=new WeakMap;return o=function(){return e},e}function s(e){if(e&&e.__esModule)return e;if(null===e||\"object\"!=typeof e&&\"function\"!=typeof e)return{default:e};var t=o();if(t&&t.has(e))return t.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var a=i?Object.getOwnPropertyDescriptor(e,n):null;a&&(a.get||a.set)?Object.defineProperty(r,n,a):r[n]=e[n]}return r.default=e,t&&t.set(e,r),r}var l=a.loadMessageBundle(),u=function(){function e(){this.data={}}return e.prototype.add=function(e,t,r){var i=this.data[e];i||(i={nodes:[],names:[]},this.data[e]=i),i.names.push(t),r&&i.nodes.push(r)},e}(),d=function(){function a(e,r){var i=this;this.warnings=[],this.settings=r,this.documentText=e.getText(),this.keyframes=new u,this.validProperties={};var n=r.getSetting(t.Settings.ValidProperties);Array.isArray(n)&&n.forEach(function(e){if(\"string\"==typeof e){var t=e.trim().toLowerCase();t.length&&(i.validProperties[t]=!0)}})}return a.entries=function(e,t,r,i){var n=new a(t,r);return e.acceptVisitor(n),n.completeValidations(),n.getEntries(i)},a.prototype.isValidPropertyDeclaration=function(e){var t=e.fullPropertyName;return this.validProperties[t]},a.prototype.fetch=function(e,t){for(var r=[],i=0,n=e;i<n.length;i++){var a=n[i];a.fullPropertyName===t&&r.push(a)}return r},a.prototype.fetchWithValue=function(e,t,r){for(var i=[],n=0,a=e;n<a.length;n++){var o=a[n];if(o.fullPropertyName===t){var s=o.node.getValue();s&&this.findValueInExpression(s,r)&&i.push(o)}}return i},a.prototype.findValueInExpression=function(e,t){var i=!1;return e.accept(function(e){return e.type===r.NodeType.Identifier&&e.matches(t)&&(i=!0),!i}),i},a.prototype.getEntries=function(e){return void 0===e&&(e=r.Level.Warning|r.Level.Error),this.warnings.filter(function(t){return 0!=(t.getLevel()&e)})},a.prototype.addEntry=function(e,t,i){var n=new r.Marker(e,t,this.settings.getRule(t),i);this.warnings.push(n)},a.prototype.getMissingNames=function(e,t){for(var r=e.slice(0),i=0;i<t.length;i++){var n=r.indexOf(t[i]);-1!==n&&(r[n]=null)}var a=null;for(i=0;i<r.length;i++){var o=r[i];o&&(a=null===a?l(\"namelist.single\",\"'{0}'\",o):l(\"namelist.concatenated\",\"{0}, '{1}'\",a,o))}return a},a.prototype.visitNode=function(e){switch(e.type){case r.NodeType.UnknownAtRule:return this.visitUnknownAtRule(e);case r.NodeType.Keyframe:return this.visitKeyframe(e);case r.NodeType.FontFace:return this.visitFontFace(e);case r.NodeType.Ruleset:return this.visitRuleSet(e);case r.NodeType.SimpleSelector:return this.visitSimpleSelector(e);case r.NodeType.Function:return this.visitFunction(e);case r.NodeType.NumericValue:return this.visitNumericValue(e);case r.NodeType.Import:return this.visitImport(e);case r.NodeType.HexColorValue:return this.visitHexColorValue(e);case r.NodeType.Prio:return this.visitPrio(e)}return!0},a.prototype.completeValidations=function(){this.validateKeyframes()},a.prototype.visitUnknownAtRule=function(r){var i=r.getChild(0);return!!i&&(!e.cssDataManager.getAtDirective(i.getText())&&(this.addEntry(i,t.Rules.UnknownAtRules,\"Unknown at rule \"+i.getText()),!0))},a.prototype.visitKeyframe=function(e){var t=e.getKeyword();if(!t)return!1;var r=t.getText();return this.keyframes.add(e.getName(),r,\"@keyframes\"!==r?t:null),!0},a.prototype.validateKeyframes=function(){var e=[\"@-webkit-keyframes\",\"@-moz-keyframes\",\"@-o-keyframes\"];for(var r in this.keyframes.data){var i=this.keyframes.data[r].names,n=-1===i.indexOf(\"@keyframes\");if(n||1!==i.length){var a=this.getMissingNames(e,i);if(a||n)for(var o=0,s=this.keyframes.data[r].nodes;o<s.length;o++){var u=s[o];if(n){var d=l(\"keyframes.standardrule.missing\",\"Always define standard rule '@keyframes' when defining keyframes.\");this.addEntry(u,t.Rules.IncludeStandardPropertyWhenUsingVendorPrefix,d)}if(a){d=l(\"keyframes.vendorspecific.missing\",\"Always include all vendor specific rules: Missing: {0}\",a);this.addEntry(u,t.Rules.AllVendorPrefixes,d)}}}}return!0},a.prototype.visitSimpleSelector=function(e){var r=this.documentText.charAt(e.offset);return 1===e.length&&\"*\"===r&&this.addEntry(e,t.Rules.UniversalSelector),\"#\"===r&&this.addEntry(e,t.Rules.AvoidIdSelector),!0},a.prototype.visitImport=function(e){return this.addEntry(e,t.Rules.ImportStatemement),!0},a.prototype.visitRuleSet=function(o){var s=o.getDeclarations();if(!s)return!1;s.hasChildren()||this.addEntry(o.getSelectors(),t.Rules.EmptyRuleSet);for(var d=[],p=0,f=s.getChildren();p<f.length;p++){(b=f[p])instanceof r.Declaration&&d.push(new i.Element(b))}var h=(0,i.default)(d);if(h.width){var c=[];if(h.right.value&&(c=(0,n.union)(c,h.right.properties)),h.left.value&&(c=(0,n.union)(c,h.left.properties)),0!==c.length){for(var y=0,g=c;y<g.length;y++){var v=g[y];this.addEntry(v.node,t.Rules.BewareOfBoxModelSize)}this.addEntry(h.width.node,t.Rules.BewareOfBoxModelSize)}}if(h.height){c=[];if(h.top.value&&(c=(0,n.union)(c,h.top.properties)),h.bottom.value&&(c=(0,n.union)(c,h.bottom.properties)),0!==c.length){for(var m=0,P=c;m<P.length;m++){v=P[m];this.addEntry(v.node,t.Rules.BewareOfBoxModelSize)}this.addEntry(h.height.node,t.Rules.BewareOfBoxModelSize)}}var w=this.fetchWithValue(d,\"display\",\"inline\");if(w.length>0)for(var k=0,E=[\"width\",\"height\",\"margin-top\",\"margin-bottom\",\"float\"];k<E.length;k++)for(var R=E[k],x=this.fetch(d,R),N=0;N<x.length;N++){var D=x[N].node,V=D.getValue();(\"float\"!==R||V&&!V.matches(\"none\"))&&this.addEntry(D,t.Rules.PropertyIgnoredDueToDisplay,l(\"rule.propertyIgnoredDueToDisplayInline\",\"Property is ignored due to the display. With 'display: inline', the width, height, margin-top, margin-bottom, and float properties have no effect.\"))}if((w=this.fetchWithValue(d,\"display\",\"inline-block\")).length>0)for(x=this.fetch(d,\"float\"),N=0;N<x.length;N++){var S=x[N].node;(V=S.getValue())&&!V.matches(\"none\")&&this.addEntry(S,t.Rules.PropertyIgnoredDueToDisplay,l(\"rule.propertyIgnoredDueToDisplayInlineBlock\",\"inline-block is ignored due to the float. If 'float' has a value other than 'none', the box is floated and 'display' is treated as 'block'\"))}if((w=this.fetchWithValue(d,\"display\",\"block\")).length>0)for(x=this.fetch(d,\"vertical-align\"),N=0;N<x.length;N++)this.addEntry(x[N].node,t.Rules.PropertyIgnoredDueToDisplay,l(\"rule.propertyIgnoredDueToDisplayBlock\",\"Property is ignored due to the display. With 'display: block', vertical-align should not be used.\"));var T=this.fetch(d,\"float\");for(N=0;N<T.length;N++){var b=T[N];this.isValidPropertyDeclaration(b)||this.addEntry(b.node,t.Rules.AvoidFloat)}for(var I=0;I<d.length;I++){if(\"background\"!==(b=d[I]).fullPropertyName&&!this.validProperties[b.fullPropertyName])if((V=b.node.getValue())&&\"-\"!==this.documentText.charAt(V.offset)){var A=this.fetch(d,b.fullPropertyName);if(A.length>1)for(var M=0;M<A.length;M++){var F=A[M].node.getValue();F&&\"-\"!==this.documentText.charAt(F.offset)&&A[M]!==b&&this.addEntry(b.node,t.Rules.DuplicateDeclarations)}}}if(!o.getSelectors().matches(\":export\")){for(var O=new u,C=!1,j=0,U=d;j<U.length;j++){var B=(b=U[j]).node;if(this.isCSSDeclaration(B)){var W=b.fullPropertyName,L=W.charAt(0);if(\"-\"===L){if(\"-\"!==W.charAt(1)){e.cssDataManager.isKnownProperty(W)||this.validProperties[W]||this.addEntry(B.getProperty(),t.Rules.UnknownVendorSpecificProperty);var K=B.getNonPrefixedPropertyName();O.add(K,W,B.getProperty())}}else{var q=W;\"*\"!==L&&\"_\"!==L||(this.addEntry(B.getProperty(),t.Rules.IEStarHack),W=W.substr(1)),e.cssDataManager.isKnownProperty(q)||e.cssDataManager.isKnownProperty(W)||this.validProperties[W]||this.addEntry(B.getProperty(),t.Rules.UnknownProperty,l(\"property.unknownproperty.detailed\",\"Unknown property: '{0}'\",W)),O.add(W,W,null)}}else C=!0}if(!C)for(var z in O.data){var H=O.data[z],_=H.names,Z=e.cssDataManager.isStandardProperty(z)&&-1===_.indexOf(z);if(Z||1!==_.length){for(var G=[],J=(I=0,a.prefixes.length);I<J;I++){var Q=a.prefixes[I];e.cssDataManager.isStandardProperty(Q+z)&&G.push(Q+z)}var X=this.getMissingNames(G,_);if(X||Z)for(var Y=0,$=H.nodes;Y<$.length;Y++){var ee=$[Y];if(Z){var te=l(\"property.standard.missing\",\"Also define the standard property '{0}' for compatibility\",z);this.addEntry(ee,t.Rules.IncludeStandardPropertyWhenUsingVendorPrefix,te)}if(X){te=l(\"property.vendorspecific.missing\",\"Always include all vendor specific properties: Missing: {0}\",X);this.addEntry(ee,t.Rules.AllVendorPrefixes,te)}}}}}return!0},a.prototype.visitPrio=function(e){return this.addEntry(e,t.Rules.AvoidImportant),!0},a.prototype.visitNumericValue=function(i){var n=i.findParent(r.NodeType.Function);if(n&&\"calc\"===n.getName())return!0;var a=i.findParent(r.NodeType.Declaration);if(a&&a.getValue()){var o=i.getValue();if(!o.unit||-1===e.units.length.indexOf(o.unit.toLowerCase()))return!0;0===parseFloat(o.value)&&o.unit&&!this.validProperties[a.getFullPropertyName()]&&this.addEntry(i,t.Rules.ZeroWithUnit)}return!0},a.prototype.visitFontFace=function(e){var r=e.getDeclarations();if(!r)return!1;for(var i=!1,n=!1,a=!1,o=0,s=r.getChildren();o<s.length;o++){var l=s[o];if(this.isCSSDeclaration(l)){var u=l.getProperty().getName().toLowerCase();\"src\"===u&&(i=!0),\"font-family\"===u&&(n=!0)}else a=!0}return a||i&&n||this.addEntry(e,t.Rules.RequiredPropertiesForFontFace),!0},a.prototype.isCSSDeclaration=function(e){if(e instanceof r.Declaration){if(!e.getValue())return!1;var t=e.getProperty();if(!t)return!1;var i=t.getIdentifier();return!(!i||i.containsInterpolation())}return!1},a.prototype.visitHexColorValue=function(e){var r=e.length;return 9!==r&&7!==r&&5!==r&&4!==r&&this.addEntry(e,t.Rules.HexColorLength),!1},a.prototype.visitFunction=function(e){var i=e.getName().toLowerCase(),n=-1,a=0;switch(i){case\"rgb(\":case\"hsl(\":n=3;break;case\"rgba(\":case\"hsla(\":n=4}return-1!==n&&(e.getArguments().accept(function(e){return!(e instanceof r.BinaryExpression)||(a+=1,!1)}),a!==n&&this.addEntry(e,t.Rules.ArgsInColorFunction)),!0},a.prefixes=[\"-ms-\",\"-moz-\",\"-o-\",\"-webkit-\"],a}();exports.LintVisitor=d;"},"sourceMaps":null,"error":null,"hash":"5e87c9e4ad6b276916c9ed80e81c54f3","cacheData":{"env":{}}}