{"id":"KNHO","dependencies":[{"name":"/Users/guoyaqi/work/2020/playground/node_modules/monaco-editor/package.json","includedInParent":true,"mtime":1584771267802},{"name":"./../../jsonc-parser/main.js","loc":{"line":18,"column":22},"parent":"/Users/guoyaqi/work/2020/playground/node_modules/monaco-editor/esm/vs/language/json/_deps/vscode-json-languageservice/parser/jsonParser.js","resolved":"/Users/guoyaqi/work/2020/playground/node_modules/monaco-editor/esm/vs/language/json/_deps/jsonc-parser/main.js"},{"name":"../utils/objects.js","loc":{"line":19,"column":65},"parent":"/Users/guoyaqi/work/2020/playground/node_modules/monaco-editor/esm/vs/language/json/_deps/vscode-json-languageservice/parser/jsonParser.js","resolved":"/Users/guoyaqi/work/2020/playground/node_modules/monaco-editor/esm/vs/language/json/_deps/vscode-json-languageservice/utils/objects.js"},{"name":"../jsonLanguageTypes.js","loc":{"line":20,"column":65},"parent":"/Users/guoyaqi/work/2020/playground/node_modules/monaco-editor/esm/vs/language/json/_deps/vscode-json-languageservice/parser/jsonParser.js","resolved":"/Users/guoyaqi/work/2020/playground/node_modules/monaco-editor/esm/vs/language/json/_deps/vscode-json-languageservice/jsonLanguageTypes.js"},{"name":"./../../../fillers/vscode-nls.js","loc":{"line":21,"column":21},"parent":"/Users/guoyaqi/work/2020/playground/node_modules/monaco-editor/esm/vs/language/json/_deps/vscode-json-languageservice/parser/jsonParser.js","resolved":"/Users/guoyaqi/work/2020/playground/node_modules/monaco-editor/esm/vs/language/json/fillers/vscode-nls.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.asSchema=y,exports.newJSONDocument=E,exports.getNodeValue=S,exports.getNodePath=k,exports.contains=O,exports.parse=T,exports.JSONDocument=exports.ValidationResult=exports.EnumMatch=exports.ObjectASTNodeImpl=exports.PropertyASTNodeImpl=exports.StringASTNodeImpl=exports.NumberASTNodeImpl=exports.ArrayASTNodeImpl=exports.BooleanASTNodeImpl=exports.NullASTNodeImpl=exports.ASTNodeImpl=void 0;var e=i(require(\"./../../jsonc-parser/main.js\")),t=require(\"../utils/objects.js\"),r=require(\"../jsonLanguageTypes.js\"),n=i(require(\"./../../../fillers/vscode-nls.js\"));function o(){if(\"function\"!=typeof WeakMap)return null;var e=new WeakMap;return o=function(){return e},e}function i(e){if(e&&e.__esModule)return e;if(null===e||\"object\"!=typeof e&&\"function\"!=typeof e)return{default:e};var t=o();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=n?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(r,i,a):r[i]=e[i]}return r.default=e,t&&t.set(e,r),r}var a=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),s=n.loadMessageBundle(),l={\"color-hex\":{errorMessage:s(\"colorHexFormatWarning\",\"Invalid color format. Use #RGB, #RGBA, #RRGGBB or #RRGGBBAA.\"),pattern:/^#([0-9A-Fa-f]{3,4}|([0-9A-Fa-f]{2}){3,4})$/},\"date-time\":{errorMessage:s(\"dateTimeFormatWarning\",\"String is not a RFC3339 date-time.\"),pattern:/^(\\d{4})-(0[1-9]|1[0-2])-(0[1-9]|[12][0-9]|3[01])T([01][0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9]|60)(\\.[0-9]+)?(Z|(\\+|-)([01][0-9]|2[0-3]):([0-5][0-9]))$/i},date:{errorMessage:s(\"dateFormatWarning\",\"String is not a RFC3339 date.\"),pattern:/^(\\d{4})-(0[1-9]|1[0-2])-(0[1-9]|[12][0-9]|3[01])$/i},time:{errorMessage:s(\"timeFormatWarning\",\"String is not a RFC3339 time.\"),pattern:/^([01][0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9]|60)(\\.[0-9]+)?(Z|(\\+|-)([01][0-9]|2[0-3]):([0-5][0-9]))$/i},email:{errorMessage:s(\"emailFormatWarning\",\"String is not an e-mail address.\"),pattern:/^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/}},u=function(){function e(e,t,r){this.offset=t,this.length=r,this.parent=e}return Object.defineProperty(e.prototype,\"children\",{get:function(){return[]},enumerable:!0,configurable:!0}),e.prototype.toString=function(){return\"type: \"+this.type+\" (\"+this.offset+\"/\"+this.length+\")\"+(this.parent?\" parent: {\"+this.parent.toString()+\"}\":\"\")},e}();exports.ASTNodeImpl=u;var c=function(e){function t(t,r){var n=e.call(this,t,r)||this;return n.type=\"null\",n.value=null,n}return a(t,e),t}(u);exports.NullASTNodeImpl=c;var p=function(e){function t(t,r,n){var o=e.call(this,t,n)||this;return o.type=\"boolean\",o.value=r,o}return a(t,e),t}(u);exports.BooleanASTNodeImpl=p;var f=function(e){function t(t,r){var n=e.call(this,t,r)||this;return n.type=\"array\",n.items=[],n}return a(t,e),Object.defineProperty(t.prototype,\"children\",{get:function(){return this.items},enumerable:!0,configurable:!0}),t}(u);exports.ArrayASTNodeImpl=f;var m=function(e){function t(t,r){var n=e.call(this,t,r)||this;return n.type=\"number\",n.isInteger=!0,n.value=Number.NaN,n}return a(t,e),t}(u);exports.NumberASTNodeImpl=m;var g=function(e){function t(t,r,n){var o=e.call(this,t,r,n)||this;return o.type=\"string\",o.value=\"\",o}return a(t,e),t}(u);exports.StringASTNodeImpl=g;var h=function(e){function t(t,r){var n=e.call(this,t,r)||this;return n.type=\"property\",n.colonOffset=-1,n}return a(t,e),Object.defineProperty(t.prototype,\"children\",{get:function(){return this.valueNode?[this.keyNode,this.valueNode]:[this.keyNode]},enumerable:!0,configurable:!0}),t}(u);exports.PropertyASTNodeImpl=h;var d,v=function(e){function t(t,r){var n=e.call(this,t,r)||this;return n.type=\"object\",n.properties=[],n}return a(t,e),Object.defineProperty(t.prototype,\"children\",{get:function(){return this.properties},enumerable:!0,configurable:!0}),t}(u);function y(e){return(0,t.isBoolean)(e)?e?{}:{not:{}}:e}exports.ObjectASTNodeImpl=v,exports.EnumMatch=d,function(e){e[e.Key=0]=\"Key\",e[e.Enum=1]=\"Enum\"}(d||(exports.EnumMatch=d={}));var b=function(){function e(e,t){void 0===e&&(e=-1),void 0===t&&(t=null),this.focusOffset=e,this.exclude=t,this.schemas=[]}return e.prototype.add=function(e){this.schemas.push(e)},e.prototype.merge=function(e){var t;(t=this.schemas).push.apply(t,e.schemas)},e.prototype.include=function(e){return(-1===this.focusOffset||O(e,this.focusOffset))&&e!==this.exclude},e.prototype.newSub=function(){return new e(-1,this.exclude)},e}(),x=function(){function e(){}return Object.defineProperty(e.prototype,\"schemas\",{get:function(){return[]},enumerable:!0,configurable:!0}),e.prototype.add=function(e){},e.prototype.merge=function(e){},e.prototype.include=function(e){return!0},e.prototype.newSub=function(){return this},e.instance=new e,e}(),M=function(){function e(){this.problems=[],this.propertiesMatches=0,this.propertiesValueMatches=0,this.primaryValueMatches=0,this.enumValueMatch=!1,this.enumValues=null}return e.prototype.hasProblems=function(){return!!this.problems.length},e.prototype.mergeAll=function(e){for(var t=0,r=e;t<r.length;t++){var n=r[t];this.merge(n)}},e.prototype.merge=function(e){this.problems=this.problems.concat(e.problems)},e.prototype.mergeEnumValues=function(e){if(!this.enumValueMatch&&!e.enumValueMatch&&this.enumValues&&e.enumValues){this.enumValues=this.enumValues.concat(e.enumValues);for(var t=0,n=this.problems;t<n.length;t++){var o=n[t];o.code===r.ErrorCode.EnumValueMismatch&&(o.message=s(\"enumWarning\",\"Value is not accepted. Valid values: {0}.\",this.enumValues.map(function(e){return JSON.stringify(e)}).join(\", \")))}}},e.prototype.mergePropertyMatch=function(e){this.merge(e),this.propertiesMatches++,(e.enumValueMatch||!e.hasProblems()&&e.propertiesMatches)&&this.propertiesValueMatches++,e.enumValueMatch&&e.enumValues&&1===e.enumValues.length&&this.primaryValueMatches++},e.prototype.compare=function(e){var t=this.hasProblems();return t!==e.hasProblems()?t?-1:1:this.enumValueMatch!==e.enumValueMatch?e.enumValueMatch?-1:1:this.primaryValueMatches!==e.primaryValueMatches?this.primaryValueMatches-e.primaryValueMatches:this.propertiesValueMatches!==e.propertiesValueMatches?this.propertiesValueMatches-e.propertiesValueMatches:this.propertiesMatches-e.propertiesMatches},e}();function E(e,t){return void 0===t&&(t=[]),new N(e,t,[])}function S(t){return e.getNodeValue(t)}function k(t){return e.getNodePath(t)}function O(e,t,r){return void 0===r&&(r=!1),t>=e.offset&&t<e.offset+e.length||r&&t===e.offset+e.length}exports.ValidationResult=M;var N=function(){function t(e,t,r){void 0===t&&(t=[]),void 0===r&&(r=[]),this.root=e,this.syntaxErrors=t,this.comments=r}return t.prototype.getNodeFromOffset=function(t,r){if(void 0===r&&(r=!1),this.root)return e.findNodeAtOffset(this.root,t,r)},t.prototype.visit=function(e){if(this.root){var t=function(r){var n=e(r),o=r.children;if(Array.isArray(o))for(var i=0;i<o.length&&n;i++)n=t(o[i]);return n};t(this.root)}},t.prototype.validate=function(e,t){if(this.root&&t){var n=new M;return V(this.root,t,n,x.instance),n.problems.map(function(t){var n=r.Range.create(e.positionAt(t.location.offset),e.positionAt(t.location.offset+t.location.length));return r.Diagnostic.create(n,t.message,t.severity,t.code)})}return null},t.prototype.getMatchingSchemas=function(e,t,r){void 0===t&&(t=-1),void 0===r&&(r=null);var n=new b(t,r);return this.root&&e&&V(this.root,e,new M,n),n.schemas},t}();function V(e,n,o,i){if(e&&i.include(e)){switch(e.type){case\"object\":!function(e,n,o,i){for(var a=Object.create(null),l=[],u=0,c=e.properties;u<c.length;u++){var p=c[u],f=p.keyNode.value;a[f]=p.valueNode,l.push(f)}if(Array.isArray(n.required))for(var m=0,g=n.required;m<g.length;m++){var h=g[m];if(!a[h]){var d=e.parent&&\"property\"===e.parent.type&&e.parent.keyNode,v=d?{offset:d.offset,length:d.length}:{offset:e.offset,length:1};o.problems.push({location:v,severity:r.DiagnosticSeverity.Warning,message:s(\"MissingRequiredPropWarning\",'Missing property \"{0}\".',h)})}}var b=function(e){for(var t=l.indexOf(e);t>=0;)l.splice(t,1),t=l.indexOf(e)};if(n.properties)for(var E=0,S=Object.keys(n.properties);E<S.length;E++){var h=S[E];b(h);var k=n.properties[h],O=a[h];if(O)if((0,t.isBoolean)(k))if(k)o.propertiesMatches++,o.propertiesValueMatches++;else{var p=O.parent;o.problems.push({location:{offset:p.keyNode.offset,length:p.keyNode.length},severity:r.DiagnosticSeverity.Warning,message:n.errorMessage||s(\"DisallowedExtraPropWarning\",\"Property {0} is not allowed.\",h)})}else{var N=new M;V(O,k,N,i),o.mergePropertyMatch(N)}}if(n.patternProperties)for(var T=0,W=Object.keys(n.patternProperties);T<W.length;T++)for(var P=W[T],w=new RegExp(P),A=0,I=l.slice(0);A<I.length;A++){var h=I[A];if(w.test(h)){b(h);var O=a[h];if(O){var k=n.patternProperties[P];if((0,t.isBoolean)(k))if(k)o.propertiesMatches++,o.propertiesValueMatches++;else{var p=O.parent;o.problems.push({location:{offset:p.keyNode.offset,length:p.keyNode.length},severity:r.DiagnosticSeverity.Warning,message:n.errorMessage||s(\"DisallowedExtraPropWarning\",\"Property {0} is not allowed.\",h)})}else{var N=new M;V(O,k,N,i),o.mergePropertyMatch(N)}}}}if(\"object\"==typeof n.additionalProperties)for(var C=0,D=l;C<D.length;C++){var h=D[C],O=a[h];if(O){var N=new M;V(O,n.additionalProperties,N,i),o.mergePropertyMatch(N)}}else if(!1===n.additionalProperties&&l.length>0)for(var j=0,R=l;j<R.length;j++){var h=R[j],O=a[h];if(O){var p=O.parent;o.problems.push({location:{offset:p.keyNode.offset,length:p.keyNode.length},severity:r.DiagnosticSeverity.Warning,message:n.errorMessage||s(\"DisallowedExtraPropWarning\",\"Property {0} is not allowed.\",h)})}}(0,t.isNumber)(n.maxProperties)&&e.properties.length>n.maxProperties&&o.problems.push({location:{offset:e.offset,length:e.length},severity:r.DiagnosticSeverity.Warning,message:s(\"MaxPropWarning\",\"Object has more properties than limit of {0}.\",n.maxProperties)});(0,t.isNumber)(n.minProperties)&&e.properties.length<n.minProperties&&o.problems.push({location:{offset:e.offset,length:e.length},severity:r.DiagnosticSeverity.Warning,message:s(\"MinPropWarning\",\"Object has fewer properties than the required number of {0}\",n.minProperties)});if(n.dependencies)for(var U=0,q=Object.keys(n.dependencies);U<q.length;U++){var f=q[U],B=a[f];if(B){var F=n.dependencies[f];if(Array.isArray(F))for(var L=0,_=F;L<_.length;L++){var J=_[L];a[J]?o.propertiesValueMatches++:o.problems.push({location:{offset:e.offset,length:e.length},severity:r.DiagnosticSeverity.Warning,message:s(\"RequiredDependentPropWarning\",\"Object is missing property {0} required by property {1}.\",J,f)})}else{var k=y(F);if(k){var N=new M;V(e,k,N,i),o.mergePropertyMatch(N)}}}}var G=y(n.propertyNames);if(G)for(var K=0,$=e.properties;K<$.length;K++){var Z=$[K],f=Z.keyNode;f&&V(f,G,o,x.instance)}}(e,n,o,i);break;case\"array\":!function(e,n,o,i){if(Array.isArray(n.items)){for(var a=n.items,l=0;l<a.length;l++){var u=a[l],c=y(u),p=new M,f=e.items[l];f?(V(f,c,p,i),o.mergePropertyMatch(p)):e.items.length>=a.length&&o.propertiesValueMatches++}if(e.items.length>a.length)if(\"object\"==typeof n.additionalItems)for(var m=a.length;m<e.items.length;m++){var p=new M;V(e.items[m],n.additionalItems,p,i),o.mergePropertyMatch(p)}else!1===n.additionalItems&&o.problems.push({location:{offset:e.offset,length:e.length},severity:r.DiagnosticSeverity.Warning,message:s(\"additionalItemsWarning\",\"Array has too many items according to schema. Expected {0} or fewer.\",a.length)})}else{var g=y(n.items);if(g)for(var h=0,d=e.items;h<d.length;h++){var f=d[h],p=new M;V(f,g,p,i),o.mergePropertyMatch(p)}}var v=y(n.contains);if(v){var b=e.items.some(function(e){var t=new M;return V(e,v,t,x.instance),!t.hasProblems()});b||o.problems.push({location:{offset:e.offset,length:e.length},severity:r.DiagnosticSeverity.Warning,message:n.errorMessage||s(\"requiredItemMissingWarning\",\"Array does not contain required item.\")})}(0,t.isNumber)(n.minItems)&&e.items.length<n.minItems&&o.problems.push({location:{offset:e.offset,length:e.length},severity:r.DiagnosticSeverity.Warning,message:s(\"minItemsWarning\",\"Array has too few items. Expected {0} or more.\",n.minItems)});(0,t.isNumber)(n.maxItems)&&e.items.length>n.maxItems&&o.problems.push({location:{offset:e.offset,length:e.length},severity:r.DiagnosticSeverity.Warning,message:s(\"maxItemsWarning\",\"Array has too many items. Expected {0} or fewer.\",n.maxItems)});if(!0===n.uniqueItems){var E=S(e),k=E.some(function(e,t){return t!==E.lastIndexOf(e)});k&&o.problems.push({location:{offset:e.offset,length:e.length},severity:r.DiagnosticSeverity.Warning,message:s(\"uniqueItemsWarning\",\"Array has duplicate items.\")})}}(e,n,o,i);break;case\"string\":!function(e,n,o,i){(0,t.isNumber)(n.minLength)&&e.value.length<n.minLength&&o.problems.push({location:{offset:e.offset,length:e.length},severity:r.DiagnosticSeverity.Warning,message:s(\"minLengthWarning\",\"String is shorter than the minimum length of {0}.\",n.minLength)});(0,t.isNumber)(n.maxLength)&&e.value.length>n.maxLength&&o.problems.push({location:{offset:e.offset,length:e.length},severity:r.DiagnosticSeverity.Warning,message:s(\"maxLengthWarning\",\"String is longer than the maximum length of {0}.\",n.maxLength)});if((0,t.isString)(n.pattern)){var a=new RegExp(n.pattern);a.test(e.value)||o.problems.push({location:{offset:e.offset,length:e.length},severity:r.DiagnosticSeverity.Warning,message:n.patternErrorMessage||n.errorMessage||s(\"patternWarning\",'String does not match the pattern of \"{0}\".',n.pattern)})}if(n.format)switch(n.format){case\"uri\":case\"uri-reference\":var u=void 0;if(e.value){var c=/^(([^:/?#]+?):)?(\\/\\/([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?/.exec(e.value);c?c[2]||\"uri\"!==n.format||(u=s(\"uriSchemeMissing\",\"URI with a scheme is expected.\")):u=s(\"uriMissing\",\"URI is expected.\")}else u=s(\"uriEmpty\",\"URI expected.\");u&&o.problems.push({location:{offset:e.offset,length:e.length},severity:r.DiagnosticSeverity.Warning,message:n.patternErrorMessage||n.errorMessage||s(\"uriFormatWarning\",\"String is not a URI: {0}\",u)});break;case\"color-hex\":case\"date-time\":case\"date\":case\"time\":case\"email\":var p=l[n.format];e.value&&p.pattern.exec(e.value)||o.problems.push({location:{offset:e.offset,length:e.length},severity:r.DiagnosticSeverity.Warning,message:n.patternErrorMessage||n.errorMessage||p.errorMessage})}}(e,n,o);break;case\"number\":!function(e,n,o,i){var a=e.value;(0,t.isNumber)(n.multipleOf)&&a%n.multipleOf!=0&&o.problems.push({location:{offset:e.offset,length:e.length},severity:r.DiagnosticSeverity.Warning,message:s(\"multipleOfWarning\",\"Value is not divisible by {0}.\",n.multipleOf)});function l(e,r){return(0,t.isNumber)(r)?r:(0,t.isBoolean)(r)&&r?e:void 0}function u(e,r){if(!(0,t.isBoolean)(r)||!r)return e}var c=l(n.minimum,n.exclusiveMinimum);(0,t.isNumber)(c)&&a<=c&&o.problems.push({location:{offset:e.offset,length:e.length},severity:r.DiagnosticSeverity.Warning,message:s(\"exclusiveMinimumWarning\",\"Value is below the exclusive minimum of {0}.\",c)});var p=l(n.maximum,n.exclusiveMaximum);(0,t.isNumber)(p)&&a>=p&&o.problems.push({location:{offset:e.offset,length:e.length},severity:r.DiagnosticSeverity.Warning,message:s(\"exclusiveMaximumWarning\",\"Value is above the exclusive maximum of {0}.\",p)});var f=u(n.minimum,n.exclusiveMinimum);(0,t.isNumber)(f)&&a<f&&o.problems.push({location:{offset:e.offset,length:e.length},severity:r.DiagnosticSeverity.Warning,message:s(\"minimumWarning\",\"Value is below the minimum of {0}.\",f)});var m=u(n.maximum,n.exclusiveMaximum);(0,t.isNumber)(m)&&a>m&&o.problems.push({location:{offset:e.offset,length:e.length},severity:r.DiagnosticSeverity.Warning,message:s(\"maximumWarning\",\"Value is above the maximum of {0}.\",m)})}(e,n,o);break;case\"property\":return V(e.valueNode,n,o,i)}!function(){function a(t){return e.type===t||\"integer\"===t&&\"number\"===e.type&&e.isInteger}Array.isArray(n.type)?n.type.some(a)||o.problems.push({location:{offset:e.offset,length:e.length},severity:r.DiagnosticSeverity.Warning,message:n.errorMessage||s(\"typeArrayMismatchWarning\",\"Incorrect type. Expected one of {0}.\",n.type.join(\", \"))}):n.type&&(a(n.type)||o.problems.push({location:{offset:e.offset,length:e.length},severity:r.DiagnosticSeverity.Warning,message:n.errorMessage||s(\"typeMismatchWarning\",'Incorrect type. Expected \"{0}\".',n.type)}));if(Array.isArray(n.allOf))for(var l=0,u=n.allOf;l<u.length;l++){var c=u[l];V(e,y(c),o,i)}var p=y(n.not);if(p){var f=new M,m=i.newSub();V(e,p,f,m),f.hasProblems()||o.problems.push({location:{offset:e.offset,length:e.length},severity:r.DiagnosticSeverity.Warning,message:s(\"notSchemaWarning\",\"Matches a schema that is not allowed.\")});for(var g=0,h=m.schemas;g<h.length;g++){var d=h[g];d.inverted=!d.inverted,i.add(d)}}var v=function(t,n){for(var a=[],l=null,u=0,c=t;u<c.length;u++){var p=c[u],f=y(p),m=new M,g=i.newSub();if(V(e,f,m,g),m.hasProblems()||a.push(f),l)if(n||m.hasProblems()||l.validationResult.hasProblems()){var h=m.compare(l.validationResult);h>0?l={schema:f,validationResult:m,matchingSchemas:g}:0===h&&(l.matchingSchemas.merge(g),l.validationResult.mergeEnumValues(m))}else l.matchingSchemas.merge(g),l.validationResult.propertiesMatches+=m.propertiesMatches,l.validationResult.propertiesValueMatches+=m.propertiesValueMatches;else l={schema:f,validationResult:m,matchingSchemas:g}}return a.length>1&&n&&o.problems.push({location:{offset:e.offset,length:1},severity:r.DiagnosticSeverity.Warning,message:s(\"oneOfWarning\",\"Matches multiple schemas when only one must validate.\")}),null!==l&&(o.merge(l.validationResult),o.propertiesMatches+=l.validationResult.propertiesMatches,o.propertiesValueMatches+=l.validationResult.propertiesValueMatches,i.merge(l.matchingSchemas)),a.length};Array.isArray(n.anyOf)&&v(n.anyOf,!1);Array.isArray(n.oneOf)&&v(n.oneOf,!0);var b=function(t){var r=new M,n=i.newSub();V(e,y(t),r,n),o.merge(r),o.propertiesMatches+=r.propertiesMatches,o.propertiesValueMatches+=r.propertiesValueMatches,i.merge(n)},x=y(n.if);x&&function(t,r,n){var o=y(t),a=new M,s=i.newSub();V(e,o,a,s),i.merge(s),a.hasProblems()?n&&b(n):r&&b(r)}(x,y(n.then),y(n.else));if(Array.isArray(n.enum)){for(var E=S(e),k=!1,O=0,N=n.enum;O<N.length;O++){var T=N[O];if((0,t.equals)(E,T)){k=!0;break}}o.enumValues=n.enum,o.enumValueMatch=k,k||o.problems.push({location:{offset:e.offset,length:e.length},severity:r.DiagnosticSeverity.Warning,code:r.ErrorCode.EnumValueMismatch,message:n.errorMessage||s(\"enumWarning\",\"Value is not accepted. Valid values: {0}.\",n.enum.map(function(e){return JSON.stringify(e)}).join(\", \"))})}if((0,t.isDefined)(n.const)){var E=S(e);(0,t.equals)(E,n.const)?o.enumValueMatch=!0:(o.problems.push({location:{offset:e.offset,length:e.length},severity:r.DiagnosticSeverity.Warning,code:r.ErrorCode.EnumValueMismatch,message:n.errorMessage||s(\"constWarning\",\"Value must be {0}.\",JSON.stringify(n.const))}),o.enumValueMatch=!1),o.enumValues=[n.const]}n.deprecationMessage&&e.parent&&o.problems.push({location:{offset:e.parent.offset,length:e.parent.length},severity:r.DiagnosticSeverity.Warning,message:n.deprecationMessage})}(),i.add({node:e,schema:n})}}function T(n,o){var i=[],a=-1,l=n.getText(),u=e.createScanner(l,!1),d=o&&o.collectComments?[]:void 0;function y(){for(;;){var e=u.scan();switch(M(),e){case 12:case 13:Array.isArray(d)&&d.push(r.Range.create(n.positionAt(u.getTokenOffset()),n.positionAt(u.getTokenOffset()+u.getTokenLength())));break;case 15:case 14:break;default:return e}}}function b(e,t,o,s,l){if(void 0===l&&(l=r.DiagnosticSeverity.Error),0===i.length||o!==a){var u=r.Range.create(n.positionAt(o),n.positionAt(s));i.push(r.Diagnostic.create(u,e,l,t,n.languageId)),a=o}}function x(e,t,r,n,o){void 0===r&&(r=null),void 0===n&&(n=[]),void 0===o&&(o=[]);var i=u.getTokenOffset(),a=u.getTokenOffset()+u.getTokenLength();if(i===a&&i>0){for(i--;i>0&&/\\s/.test(l.charAt(i));)i--;a=i+1}if(b(e,t,i,a),r&&E(r,!1),n.length+o.length>0)for(var s=u.getToken();17!==s;){if(-1!==n.indexOf(s)){y();break}if(-1!==o.indexOf(s))break;s=y()}return r}function M(){switch(u.getTokenError()){case 4:return x(s(\"InvalidUnicode\",\"Invalid unicode sequence in string.\"),r.ErrorCode.InvalidUnicode),!0;case 5:return x(s(\"InvalidEscapeCharacter\",\"Invalid escape character in string.\"),r.ErrorCode.InvalidEscapeCharacter),!0;case 3:return x(s(\"UnexpectedEndOfNumber\",\"Unexpected end of number.\"),r.ErrorCode.UnexpectedEndOfNumber),!0;case 1:return x(s(\"UnexpectedEndOfComment\",\"Unexpected end of comment.\"),r.ErrorCode.UnexpectedEndOfComment),!0;case 2:return x(s(\"UnexpectedEndOfString\",\"Unexpected end of string.\"),r.ErrorCode.UnexpectedEndOfString),!0;case 6:return x(s(\"InvalidCharacter\",\"Invalid characters in string. Control characters must be escaped.\"),r.ErrorCode.InvalidCharacter),!0}return!1}function E(e,t){return e.length=u.getTokenOffset()+u.getTokenLength()-e.offset,t&&y(),e}function S(e,t){var o=new h(e,u.getTokenOffset()),i=k(o);if(!i){if(16!==u.getToken())return null;x(s(\"DoubleQuotesExpected\",\"Property keys must be doublequoted\"),r.ErrorCode.Undefined);var a=new g(o,u.getTokenOffset(),u.getTokenLength());a.value=u.getTokenValue(),i=a,y()}o.keyNode=i;var l=t[i.value];if(l?(b(s(\"DuplicateKeyWarning\",\"Duplicate object key\"),r.ErrorCode.DuplicateKey,o.keyNode.offset,o.keyNode.offset+o.keyNode.length,r.DiagnosticSeverity.Warning),\"object\"==typeof l&&b(s(\"DuplicateKeyWarning\",\"Duplicate object key\"),r.ErrorCode.DuplicateKey,l.keyNode.offset,l.keyNode.offset+l.keyNode.length,r.DiagnosticSeverity.Warning),t[i.value]=!0):t[i.value]=o,6===u.getToken())o.colonOffset=u.getTokenOffset(),y();else if(x(s(\"ColonExpected\",\"Colon expected\"),r.ErrorCode.ColonExpected),10===u.getToken()&&n.positionAt(i.offset+i.length).line<n.positionAt(u.getTokenOffset()).line)return o.length=i.length,o;var c=O(o,i.value);return c?(o.valueNode=c,o.length=c.offset+c.length-o.offset,o):x(s(\"ValueExpected\",\"Value expected\"),r.ErrorCode.ValueExpected,o,[],[2,5])}function k(e){if(10!==u.getToken())return null;var t=new g(e,u.getTokenOffset());return t.value=u.getTokenValue(),E(t,!0)}function O(e,n){return function(e){if(3!==u.getToken())return null;var t=new f(e,u.getTokenOffset());y();for(var n=0,o=!1;4!==u.getToken()&&17!==u.getToken();){if(5===u.getToken()){o||x(s(\"ValueExpected\",\"Value expected\"),r.ErrorCode.ValueExpected);var i=u.getTokenOffset();if(y(),4===u.getToken()){o&&b(s(\"TrailingComma\",\"Trailing comma\"),r.ErrorCode.TrailingComma,i,i+1);continue}}else o&&x(s(\"ExpectedComma\",\"Expected comma\"),r.ErrorCode.CommaExpected);var a=O(t,n++);a?t.items.push(a):x(s(\"PropertyExpected\",\"Value expected\"),r.ErrorCode.ValueExpected,null,[],[4,5]),o=!0}return 4!==u.getToken()?x(s(\"ExpectedCloseBracket\",\"Expected comma or closing bracket\"),r.ErrorCode.CommaOrCloseBacketExpected,t):E(t,!0)}(e)||function(e){if(1!==u.getToken())return null;var t=new v(e,u.getTokenOffset()),n=Object.create(null);y();for(var o=!1;2!==u.getToken()&&17!==u.getToken();){if(5===u.getToken()){o||x(s(\"PropertyExpected\",\"Property expected\"),r.ErrorCode.PropertyExpected);var i=u.getTokenOffset();if(y(),2===u.getToken()){o&&b(s(\"TrailingComma\",\"Trailing comma\"),r.ErrorCode.TrailingComma,i,i+1);continue}}else o&&x(s(\"ExpectedComma\",\"Expected comma\"),r.ErrorCode.CommaExpected);var a=S(t,n);a?t.properties.push(a):x(s(\"PropertyExpected\",\"Property expected\"),r.ErrorCode.PropertyExpected,null,[],[2,5]),o=!0}return 2!==u.getToken()?x(s(\"ExpectedCloseBrace\",\"Expected comma or closing brace\"),r.ErrorCode.CommaOrCloseBraceExpected,t):E(t,!0)}(e)||k(e)||function(e){if(11!==u.getToken())return null;var n=new m(e,u.getTokenOffset());if(0===u.getTokenError()){var o=u.getTokenValue();try{var i=JSON.parse(o);if(!(0,t.isNumber)(i))return x(s(\"InvalidNumberFormat\",\"Invalid number format.\"),r.ErrorCode.Undefined,n);n.value=i}catch(a){return x(s(\"InvalidNumberFormat\",\"Invalid number format.\"),r.ErrorCode.Undefined,n)}n.isInteger=-1===o.indexOf(\".\")}return E(n,!0)}(e)||function(e){switch(u.getToken()){case 7:return E(new c(e,u.getTokenOffset()),!0);case 8:return E(new p(e,!0,u.getTokenOffset()),!0);case 9:return E(new p(e,!1,u.getTokenOffset()),!0);default:return null}}(e)}var V=null;return 17!==y()&&((V=O(null))?17!==u.getToken()&&x(s(\"End of file expected\",\"End of file expected.\"),r.ErrorCode.Undefined):x(s(\"Invalid symbol\",\"Expected a JSON object, array or literal.\"),r.ErrorCode.Undefined)),new N(V,i,d)}exports.JSONDocument=N;"},"sourceMaps":null,"error":null,"hash":"9a5273dd02a8bad9f4cf7b1c6629a6b7","cacheData":{"env":{}}}