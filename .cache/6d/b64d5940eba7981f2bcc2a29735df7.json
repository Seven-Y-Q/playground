{"id":"OqVr","dependencies":[{"name":"/Users/guoyaqi/work/2020/playground/node_modules/monaco-editor/package.json","includedInParent":true,"mtime":1584771267802},{"name":"../../../base/common/diff/diff.js","loc":{"line":5,"column":24},"parent":"/Users/guoyaqi/work/2020/playground/node_modules/monaco-editor/esm/vs/editor/common/diff/diffComputer.js","resolved":"/Users/guoyaqi/work/2020/playground/node_modules/monaco-editor/esm/vs/base/common/diff/diff.js"},{"name":"../../../base/common/strings.js","loc":{"line":6,"column":25},"parent":"/Users/guoyaqi/work/2020/playground/node_modules/monaco-editor/esm/vs/editor/common/diff/diffComputer.js","resolved":"/Users/guoyaqi/work/2020/playground/node_modules/monaco-editor/esm/vs/base/common/strings.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.DiffComputer=void 0;var i=require(\"../../../base/common/diff/diff.js\"),e=n(require(\"../../../base/common/strings.js\"));function t(){if(\"function\"!=typeof WeakMap)return null;var i=new WeakMap;return t=function(){return i},i}function n(i){if(i&&i.__esModule)return i;if(null===i||\"object\"!=typeof i&&\"function\"!=typeof i)return{default:i};var e=t();if(e&&e.has(i))return e.get(i);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in i)if(Object.prototype.hasOwnProperty.call(i,o)){var a=r?Object.getOwnPropertyDescriptor(i,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=i[o]}return n.default=i,e&&e.set(i,n),n}var r=3;function o(e,t,n,r){return new i.LcsDiff(e,t,n).ComputeDiff(r)}var a=function(){function i(i){for(var e=[],t=[],n=0,r=i.length;n<r;n++)e[n]=f(i[n],1),t[n]=g(i[n],1);this.lines=i,this._startColumns=e,this._endColumns=t}return i.prototype.getElements=function(){for(var i=[],e=0,t=this.lines.length;e<t;e++)i[e]=this.lines[e].substring(this._startColumns[e]-1,this._endColumns[e]-1);return i},i.prototype.getStartLineNumber=function(i){return i+1},i.prototype.getEndLineNumber=function(i){return i+1},i.prototype.createCharSequence=function(i,e,t){for(var n=[],r=[],o=[],a=0,u=e;u<=t;u++)for(var s=this.lines[u],d=i?this._startColumns[u]:1,m=i?this._endColumns[u]:s.length+1,f=d;f<m;f++)n[a]=s.charCodeAt(f-1),r[a]=u+1,o[a]=f,a++;return new h(n,r,o)},i}(),h=function(){function i(i,e,t){this._charCodes=i,this._lineNumbers=e,this._columns=t}return i.prototype.getElements=function(){return this._charCodes},i.prototype.getStartLineNumber=function(i){return this._lineNumbers[i]},i.prototype.getStartColumn=function(i){return this._columns[i]},i.prototype.getEndLineNumber=function(i){return this._lineNumbers[i]},i.prototype.getEndColumn=function(i){return this._columns[i]+1},i}(),u=function(){function i(i,e,t,n,r,o,a,h){this.originalStartLineNumber=i,this.originalStartColumn=e,this.originalEndLineNumber=t,this.originalEndColumn=n,this.modifiedStartLineNumber=r,this.modifiedStartColumn=o,this.modifiedEndLineNumber=a,this.modifiedEndColumn=h}return i.createFromDiffChange=function(e,t,n){var r,o,a,h,u,s,d,m;return 0===e.originalLength?(r=0,o=0,a=0,h=0):(r=t.getStartLineNumber(e.originalStart),o=t.getStartColumn(e.originalStart),a=t.getEndLineNumber(e.originalStart+e.originalLength-1),h=t.getEndColumn(e.originalStart+e.originalLength-1)),0===e.modifiedLength?(u=0,s=0,d=0,m=0):(u=n.getStartLineNumber(e.modifiedStart),s=n.getStartColumn(e.modifiedStart),d=n.getEndLineNumber(e.modifiedStart+e.modifiedLength-1),m=n.getEndColumn(e.modifiedStart+e.modifiedLength-1)),new i(r,o,a,h,u,s,d,m)},i}();function s(i){if(i.length<=1)return i;for(var e=[i[0]],t=e[0],n=1,o=i.length;n<o;n++){var a=i[n],h=a.originalStart-(t.originalStart+t.originalLength),u=a.modifiedStart-(t.modifiedStart+t.modifiedLength);Math.min(h,u)<r?(t.originalLength=a.originalStart+a.originalLength-t.originalStart,t.modifiedLength=a.modifiedStart+a.modifiedLength-t.modifiedStart):(e.push(a),t=a)}return e}var d=function(){function i(i,e,t,n,r){this.originalStartLineNumber=i,this.originalEndLineNumber=e,this.modifiedStartLineNumber=t,this.modifiedEndLineNumber=n,this.charChanges=r}return i.createFromDiffResult=function(e,t,n,r,a,h,d){var m,f,g,l,c=void 0;if(0===t.originalLength?(m=n.getStartLineNumber(t.originalStart)-1,f=0):(m=n.getStartLineNumber(t.originalStart),f=n.getEndLineNumber(t.originalStart+t.originalLength-1)),0===t.modifiedLength?(g=r.getStartLineNumber(t.modifiedStart)-1,l=0):(g=r.getStartLineNumber(t.modifiedStart),l=r.getEndLineNumber(t.modifiedStart+t.modifiedLength-1)),h&&t.originalLength>0&&t.originalLength<20&&t.modifiedLength>0&&t.modifiedLength<20&&a()){var C=n.createCharSequence(e,t.originalStart,t.originalStart+t.originalLength-1),L=r.createCharSequence(e,t.modifiedStart,t.modifiedStart+t.modifiedLength-1),p=o(C,L,a,!0).changes;d&&(p=s(p)),c=[];for(var S=0,b=p.length;S<b;S++)c.push(u.createFromDiffChange(p[S],C,L))}return new i(m,f,g,l,c)},i}(),m=function(){function i(i,e,t){this.shouldComputeCharChanges=t.shouldComputeCharChanges,this.shouldPostProcessCharChanges=t.shouldPostProcessCharChanges,this.shouldIgnoreTrimWhitespace=t.shouldIgnoreTrimWhitespace,this.shouldMakePrettyDiff=t.shouldMakePrettyDiff,this.originalLines=i,this.modifiedLines=e,this.original=new a(i),this.modified=new a(e),this.continueLineDiff=l(t.maxComputationTime),this.continueCharDiff=l(0===t.maxComputationTime?0:Math.min(t.maxComputationTime,5e3))}return i.prototype.computeDiff=function(){if(1===this.original.lines.length&&0===this.original.lines[0].length)return{quitEarly:!1,changes:[{originalStartLineNumber:1,originalEndLineNumber:1,modifiedStartLineNumber:1,modifiedEndLineNumber:this.modified.lines.length,charChanges:[{modifiedEndColumn:0,modifiedEndLineNumber:0,modifiedStartColumn:0,modifiedStartLineNumber:0,originalEndColumn:0,originalEndLineNumber:0,originalStartColumn:0,originalStartLineNumber:0}]}]};if(1===this.modified.lines.length&&0===this.modified.lines[0].length)return{quitEarly:!1,changes:[{originalStartLineNumber:1,originalEndLineNumber:this.original.lines.length,modifiedStartLineNumber:1,modifiedEndLineNumber:1,charChanges:[{modifiedEndColumn:0,modifiedEndLineNumber:0,modifiedStartColumn:0,modifiedStartLineNumber:0,originalEndColumn:0,originalEndLineNumber:0,originalStartColumn:0,originalStartLineNumber:0}]}]};var i=o(this.original,this.modified,this.continueLineDiff,this.shouldMakePrettyDiff),e=i.changes,t=i.quitEarly;if(this.shouldIgnoreTrimWhitespace){for(var n=[],r=0,a=e.length;r<a;r++)n.push(d.createFromDiffResult(this.shouldIgnoreTrimWhitespace,e[r],this.original,this.modified,this.continueCharDiff,this.shouldComputeCharChanges,this.shouldPostProcessCharChanges));return{quitEarly:t,changes:n}}for(var h=[],u=0,s=0,m=(r=-1,e.length);r<m;r++){for(var l=r+1<m?e[r+1]:null,c=l?l.originalStart:this.originalLines.length,C=l?l.modifiedStart:this.modifiedLines.length;u<c&&s<C;){var L=this.originalLines[u],p=this.modifiedLines[s];if(L!==p){for(var S=f(L,1),b=f(p,1);S>1&&b>1;){if(L.charCodeAt(S-2)!==p.charCodeAt(b-2))break;S--,b--}(S>1||b>1)&&this._pushTrimWhitespaceCharChange(h,u+1,1,S,s+1,1,b);for(var N=g(L,1),E=g(p,1),v=L.length+1,y=p.length+1;N<v&&E<y;){if(L.charCodeAt(N-1)!==L.charCodeAt(E-1))break;N++,E++}(N<v||E<y)&&this._pushTrimWhitespaceCharChange(h,u+1,N,v,s+1,E,y)}u++,s++}l&&(h.push(d.createFromDiffResult(this.shouldIgnoreTrimWhitespace,l,this.original,this.modified,this.continueCharDiff,this.shouldComputeCharChanges,this.shouldPostProcessCharChanges)),u+=l.originalLength,s+=l.modifiedLength)}return{quitEarly:t,changes:h}},i.prototype._pushTrimWhitespaceCharChange=function(i,e,t,n,r,o,a){if(!this._mergeTrimWhitespaceCharChange(i,e,t,n,r,o,a)){var h=void 0;this.shouldComputeCharChanges&&(h=[new u(e,t,e,n,r,o,r,a)]),i.push(new d(e,e,r,r,h))}},i.prototype._mergeTrimWhitespaceCharChange=function(i,e,t,n,r,o,a){var h=i.length;if(0===h)return!1;var s=i[h-1];return 0!==s.originalEndLineNumber&&0!==s.modifiedEndLineNumber&&(s.originalEndLineNumber+1===e&&s.modifiedEndLineNumber+1===r&&(s.originalEndLineNumber=e,s.modifiedEndLineNumber=r,this.shouldComputeCharChanges&&s.charChanges&&s.charChanges.push(new u(e,t,e,n,r,o,r,a)),!0))},i}();function f(i,t){var n=e.firstNonWhitespaceIndex(i);return-1===n?t:n+1}function g(i,t){var n=e.lastNonWhitespaceIndex(i);return-1===n?t:n+2}function l(i){if(0===i)return function(){return!0};var e=Date.now();return function(){return Date.now()-e<i}}exports.DiffComputer=m;"},"sourceMaps":null,"error":null,"hash":"c0118f427831b89203da4d7893942a30","cacheData":{"env":{}}}